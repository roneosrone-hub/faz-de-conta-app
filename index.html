<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Faz de Conta Decora√ß√µes</title>

  <style>
    :root{
      --bg0:#070b18;
      --bg1:#0b1636;

      --glass: rgba(255,255,255,.10);
      --glass2: rgba(255,255,255,.07);
      --stroke: rgba(255,255,255,.14);

      --txt: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.72);
      --muted2: rgba(255,255,255,.55);

      --shadow: 0 18px 60px rgba(0,0,0,.55);

      --r: 26px;
      --r2: 20px;

      --grad: linear-gradient(135deg,#ff4fd8,#8b5cff,#35d6ff,#71ff7a);
      --grad2: linear-gradient(135deg, rgba(255,79,216,.35), rgba(53,214,255,.25), rgba(113,255,122,.20));

      --tap: 48px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--txt);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 700px at 12% 10%, rgba(255,79,216,.18), transparent 60%),
        radial-gradient(900px 600px at 82% 22%, rgba(53,214,255,.14), transparent 60%),
        radial-gradient(900px 700px at 70% 88%, rgba(113,255,122,.12), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      min-height:100%;
    }

    a{color:inherit; text-decoration:none}
    .wrap{max-width: 980px; margin:0 auto; padding: 16px 14px 90px}

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      border: 1px solid var(--stroke);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    /* Topo */
    .top{
      padding: 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 0;
    }

    .logoBox{
      width: 62px;
      height: 62px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(0,0,0,.12);
      overflow:hidden;
      flex:0 0 auto;
      display:grid;
      place-items:center;
    }
    .logoBox img{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
    }

    .t{
      min-width: 0;
      line-height: 1.05;
    }
    .name{
      font-weight: 950;
      font-size: 20px;
      letter-spacing: .2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
      max-width: 52vw;
    }
    .slogan{
      margin-top: 6px;
      font-weight: 900;
      background: var(--grad);
      -webkit-background-clip:text;
      background-clip:text;
      color: transparent;
      white-space:nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
      max-width: 60vw;
    }
    .sub{
      margin-top: 6px;
      color: var(--muted);
      font-weight: 650;
      font-size: 13px;
    }

    .right{
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      gap: 10px;
      flex:0 0 auto;
    }

    .clock{
      display:flex;
      align-items:center;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.10);
      min-height: 42px;
      color: var(--muted);
      font-weight: 800;
      font-size: 13px;
      white-space:nowrap;
    }
    .clock b{color:var(--txt)}

    .rowBtns{
      display:flex;
      gap: 10px;
      align-items:center;
      flex-wrap: wrap;
      justify-content:flex-end;
    }

    .btn{
      cursor:pointer;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color:var(--txt);
      border-radius: 18px;
      padding: 12px 14px;
      min-height: var(--tap);
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      user-select:none;
      transition: transform .08s ease, background .2s ease;
      font-weight: 800;
    }
    .btn:active{transform:scale(.98)}
    .btnGrad{
      background: var(--grad);
      border:0;
      color:#091014;
      font-weight: 950;
    }

    /* FOTO GRANDE */
    .banner{
      margin-top: 14px;
      padding: 12px;
    }
    .bannerInner{
      border-radius: calc(var(--r) - 6px);
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.12);
      overflow:hidden;
      position:relative;
    }

    /* Ajuste aqui o tamanho da foto */
    .bannerInner img{
      width:100%;
      height: 360px;      /* <<< AUMENTA/REDUZ A FOTO AQUI */
      object-fit: cover;
      display:block;
      filter: saturate(1.05) contrast(1.03);
    }

    .bannerInner::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.05), rgba(0,0,0,.55));
      pointer-events:none;
    }

    .bannerText{
      position:absolute;
      left: 14px; right: 14px; bottom: 14px;
      z-index:2;
      display:flex;
      flex-direction:column;
      gap: 6px;
    }
    .bannerTitle{
      font-size: 22px;
      font-weight: 950;
      letter-spacing:.2px;
      margin:0;
    }
    .bannerDesc{
      margin:0;
      color: var(--muted);
      font-weight: 700;
      font-size: 13px;
      max-width: 700px;
    }

    /* Conte√∫do */
    .section{
      margin-top: 14px;
      padding: 14px;
    }
    .section h2{
      margin:0 0 8px;
      font-size: 28px;
      font-weight: 950;
      letter-spacing:.2px;
    }
    .section p{
      margin:0 0 14px;
      color: var(--muted);
      font-weight: 650;
    }

    .controls{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
    }

    .toggle{
      display:flex;
      gap:10px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.10);
      min-height: var(--tap);
      font-weight: 800;
      color: var(--muted);
    }
    .switch{
      width: 54px;
      height: 30px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      position:relative;
      flex:0 0 auto;
    }
    .knob{
      width: 26px; height: 26px;
      border-radius: 999px;
      background: rgba(255,255,255,.85);
      position:absolute;
      top: 1px; left: 1px;
      transition: left .18s ease;
    }
    .switch.on{
      background: rgba(113,255,122,.14);
    }
    .switch.on .knob{
      left: 26px;
    }

    select, input{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.10);
      color: var(--txt);
      padding: 12px 14px;
      border-radius: 18px;
      min-height: var(--tap);
      outline:0;
      font-weight: 750;
    }
    select{cursor:pointer}
    input::placeholder{color: rgba(255,255,255,.45)}

    .hint{
      margin-top: 10px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.10);
      padding: 10px 12px;
      color: var(--muted2);
      font-weight: 700;
      font-size: 13px;
      line-height: 1.35;
    }
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-weight: 800;
      color: var(--txt);
      word-break: break-all;
    }

    /* Cards de categoria */
    .grid{
      margin-top: 14px;
      display:grid;
      gap: 14px;
      grid-template-columns: repeat(12, 1fr);
    }
    .catCard{
      grid-column: span 6;
      padding: 14px;
      border-radius: var(--r2);
      border:1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.05));
      box-shadow: 0 10px 40px rgba(0,0,0,.35);
      cursor:pointer;
      transition: transform .08s ease;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
    }
    .catCard:active{transform:scale(.99)}
    @media (min-width: 820px){
      .catCard{grid-column: span 4;}
    }
    .catLeft{display:flex; flex-direction:column; gap:6px}
    .catName{font-weight: 950; font-size: 18px}
    .catDesc{color:var(--muted); font-weight:700; font-size: 13px}
    .badge{
      padding: 8px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.10);
      color: var(--muted);
      font-weight: 900;
      font-size: 12px;
      white-space:nowrap;
    }

    /* Modal simples */
    .backdrop{
      position: fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:flex-end;
      justify-content:center;
      z-index: 200;
      padding: 12px;
    }
    .backdrop.show{display:flex}
    .modal{
      width: min(760px, 100%);
      border-radius: 26px;
      border:1px solid rgba(255,255,255,.16);
      background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.08));
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      overflow:hidden;
    }
    .modalHead{
      padding: 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .modalHead h3{margin:0; font-size:16px; font-weight:950}
    .modalBody{padding: 14px; max-height: 65vh; overflow:auto}
    .line{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:12px;
      padding: 10px 0;
      border-bottom:1px dashed rgba(255,255,255,.12);
    }
    .line:last-child{border-bottom:0}
    .line b{font-weight:950}
    .line span{color:var(--muted); font-weight:700; font-size: 13px}
    .qty{
      display:flex; gap:8px; align-items:center;
      flex:0 0 auto;
    }
    .qbtn{
      width:42px; height:42px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.10);
      display:grid; place-items:center;
      font-size: 18px;
      cursor:pointer;
      user-select:none;
    }
    .num{min-width: 22px; text-align:center; font-weight:950}
    .modalFoot{
      padding: 14px;
      border-top:1px solid rgba(255,255,255,.10);
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
    }
    .total{font-weight:950; font-size: 18px}

    /* Barra inferior */
    .bottomBar{
      position: fixed;
      left:0; right:0;
      bottom: 10px;
      display:flex;
      justify-content:center;
      z-index: 60;
      pointer-events:none;
    }
    .bottomInner{
      pointer-events:auto;
      width: min(980px, calc(100% - 20px));
      display:flex;
      gap: 10px;
      padding: 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .bottomInner .btn{flex:1}
  </style>
</head>

<body>
  <div class="wrap">

    <!-- TOPO FIXO (com rel√≥gio + data) -->
    <div class="top card">
      <div class="brand">
        <div class="logoBox" title="Logo">
          <img id="logoImg" src="logo.jpg" alt="Logo"
               onerror="this.src=window.__placeholderLogo">
        </div>
        <div class="t">
          <div class="name">Faz de Conta Decora√ß√µes</div>
          <div class="slogan">Onde a imagina√ß√£o vira festa</div>
          <div class="sub">Decora√ß√µes encantadoras para momentos especiais</div>
        </div>
      </div>

      <div class="right">
        <div class="clock" title="Data e hora">
          üóìÔ∏è <b id="dateNow">‚Äî</b> ‚è∞ <b id="timeNow">‚Äî</b>
        </div>

        <div class="rowBtns">
          <a class="btn" id="btnWpp" href="#" rel="noopener">üí¨ Falar no WhatsApp</a>
          <div class="btn btnGrad" id="btnCart">üõí Carrinho (<span id="cartCount">0</span>)</div>
        </div>
      </div>
    </div>

    <!-- FOTO GRANDE (banner) -->
    <div class="banner card">
      <div class="bannerInner">
        <!-- >>> AQUI √â A FOTO QUE VOC√ä QUER MUDAR / DEIXAR MAIOR <<< -->
        <!-- Se voc√™ j√° tem o arquivo 20260102_130931.jpg, deixei ele aqui -->
        <img id="bannerImg" src="20260102_130931.jpg" alt="Foto principal"
             onerror="this.src=window.__placeholderBanner">
        <div class="bannerText">
          <p class="bannerTitle">Cat√°logo de loca√ß√£o</p>
          <p class="bannerDesc">
            Escolha itens, adicione ao carrinho e finalize por Pix ou WhatsApp.
          </p>
        </div>
      </div>
    </div>

    <!-- CONTROLES -->
    <div class="section card">
      <h2>Escolha o que voc√™ quer alugar</h2>
      <p>Toque nas categorias para ver as op√ß√µes com fotos e pre√ßos. Voc√™ pode ligar/desligar a exibi√ß√£o de valores.</p>

      <div class="controls">
        <div class="toggle" id="togglePrices" role="button">
          üîí Mostrar pre√ßos
          <div class="switch" id="sw"><div class="knob"></div></div>
        </div>

        <input id="q" type="search" placeholder="Pesquisar (ex: urso, arco, cortina)..." />

        <select id="cat">
          <option value="">Todas as categorias</option>
        </select>

        <div class="btn" id="btnClear">üßπ Limpar</div>
        <div class="btn btnGrad" id="btnPix">‚úÖ Finalizar (Pix)</div>
      </div>

      <div class="hint">
        <b>IMPORTANTE (fotos):</b> envie suas imagens para o GitHub <b>na raiz</b> (mesma pasta do <span class="mono">index.html</span>).<br>
        - Logo: <span class="mono">logo.jpg</span><br>
        - Foto grande: <span class="mono">20260102_130931.jpg</span> (ou troque o nome no c√≥digo)<br>
        Se o nome do arquivo n√£o bater 100%, o app n√£o encontra e a foto some.
      </div>
    </div>

    <!-- CATEGORIAS -->
    <div class="grid" id="gridCats"></div>

  </div>

  <!-- Barra inferior (atalhos) -->
  <div class="bottomBar">
    <div class="bottomInner">
      <a class="btn" id="btnWpp2" href="#" rel="noopener">üí¨ WhatsApp</a>
      <div class="btn btnGrad" id="btnCart2">üõí Carrinho (<span id="cartCount2">0</span>)</div>
      <div class="btn btnGrad" id="btnPix2">‚úÖ Pix</div>
    </div>
  </div>

  <!-- MODAL CARRINHO -->
  <div class="backdrop" id="cartModal">
    <div class="modal">
      <div class="modalHead">
        <h3>üõí Seu carrinho</h3>
        <div class="btn" id="closeCart">‚úñ</div>
      </div>
      <div class="modalBody" id="cartBody"></div>
      <div class="modalFoot">
        <div class="total">Total: <span id="cartTotal">R$ 0,00</span></div>
        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <div class="btn" id="clearCart">üóëÔ∏è Limpar</div>
          <div class="btn btnGrad" id="goPix">‚úÖ Finalizar (Pix)</div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL PIX -->
  <div class="backdrop" id="pixModal">
    <div class="modal">
      <div class="modalHead">
        <h3>‚úÖ Finalizar (Pix)</h3>
        <div class="btn" id="closePix">‚úñ</div>
      </div>
      <div class="modalBody">
        <div class="hint" style="margin-top:0">
          <b>1)</b> Copie a chave Pix e fa√ßa o pagamento no seu banco.<br>
          <b>2)</b> Depois, envie o pedido no WhatsApp para confirmar.
        </div>

        <div class="hint" style="margin-top:12px">
          <b>Chave Pix:</b><br>
          <span class="mono" id="pixKey"></span><br><br>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <div class="btn" id="copyPix">üìã Copiar chave</div>
            <div class="btn" id="copyMsg">üìã Copiar pedido</div>
            <div class="btn btnGrad" id="pixWhats">üí¨ Enviar pedido no WhatsApp</div>
          </div>
        </div>

        <div class="hint" style="margin-top:12px">
          <b>Resumo do pedido:</b><br>
          <span class="mono" id="pixSummary"></span>
        </div>
      </div>
      <div class="modalFoot">
        <div class="total">Total: <span id="pixTotal">R$ 0,00</span></div>
      </div>
    </div>
  </div>

  <script>
    /* ========= CONFIG (edite aqui) ========= */
    const WHATSAPP_PHONE = "5566996223481"; // 55 + DDD + n√∫mero (sem espa√ßos)
    const PIX_KEY = "SUA_CHAVE_PIX_AQUI";   // <- TROQUE pela sua chave Pix

    // Produtos (exemplo). Pode adicionar mais depois.
    const PRODUCTS = [
      { id:"cubo-1", cat:"Cubo", name:"Cubo Estrutural", desc:"Estrutura e suporte para painel/mesa.", price:80, image:"cubo.jpg" },
      { id:"arco-1", cat:"Arco de bal√µes", name:"Arco Org√¢nico (P)", desc:"Arco para entrada ou mesa.", price:180, image:"arco-rosa.jpg" },
      { id:"arco-2", cat:"Arco de bal√µes", name:"Arco Org√¢nico (M)", desc:"Tamanho m√©dio para cen√°rio.", price:260, image:"arco-colorido.jpg" },
      { id:"cort-1", cat:"Cortina", name:"Cortina Dourada", desc:"Fundo e acabamento do painel.", price:20, image:"cortina-dourada.jpg" },
      { id:"urso-1", cat:"Ursos", name:"Ursinho Decorativo", desc:"Ursinho para compor o cen√°rio.", price:25, image:"urso-rosa.jpg" },
    ];

    /* ========= Placeholders (se foto n√£o carregar) ========= */
    const PLACEHOLDER = (label) =>
      "data:image/svg+xml;charset=utf-8," + encodeURIComponent(`
        <svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800">
          <defs>
            <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#ff4fd8" stop-opacity=".35"/>
              <stop offset="0.5" stop-color="#35d6ff" stop-opacity=".22"/>
              <stop offset="1" stop-color="#71ff7a" stop-opacity=".18"/>
            </linearGradient>
          </defs>
          <rect width="100%" height="100%" fill="#0b1636"/>
          <rect x="50" y="50" width="1100" height="700" rx="50" fill="url(#g)"/>
          <text x="90" y="210" fill="rgba(255,255,255,.9)" font-size="70" font-family="Arial" font-weight="800">${label}</text>
          <text x="90" y="290" fill="rgba(255,255,255,.75)" font-size="34" font-family="Arial" font-weight="700">Faz de Conta Decora√ß√µes</text>
          <text x="90" y="345" fill="rgba(255,255,255,.65)" font-size="28" font-family="Arial" font-weight="700">Envie a foto para o GitHub com o nome certo</text>
        </svg>
      `);

    window.__placeholderLogo = PLACEHOLDER("Logo");
    window.__placeholderBanner = PLACEHOLDER("Foto principal");

    /* ========= Helpers ========= */
    const money = (v) => new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v);

    let showPrices = false;
    let q = "";
    let cat = "";
    const cart = new Map(); // id -> qty

    const el = {
      gridCats: document.getElementById("gridCats"),
      q: document.getElementById("q"),
      cat: document.getElementById("cat"),
      sw: document.getElementById("sw"),
      cartCount: document.getElementById("cartCount"),
      cartCount2: document.getElementById("cartCount2"),
      cartModal: document.getElementById("cartModal"),
      cartBody: document.getElementById("cartBody"),
      cartTotal: document.getElementById("cartTotal"),
      pixModal: document.getElementById("pixModal"),
      pixKey: document.getElementById("pixKey"),
      pixSummary: document.getElementById("pixSummary"),
      pixTotal: document.getElementById("pixTotal"),
      dateNow: document.getElementById("dateNow"),
      timeNow: document.getElementById("timeNow"),
    };

    function setWhatsappLinks(){
      const base = `https://wa.me/${WHATSAPP_PHONE}?text=`;
      const msg = encodeURIComponent("Ol√°! Vim pelo app Faz de Conta. Quero um or√ßamento üòä");
      document.getElementById("btnWpp").href = base + msg;
      document.getElementById("btnWpp2").href = base + msg;
    }

    function initCats(){
      const cats = [...new Set(PRODUCTS.map(p => p.cat))].sort();
      cats.forEach(c=>{
        const o = document.createElement("option");
        o.value = c; o.textContent = c;
        el.cat.appendChild(o);
      });
    }

    function filtered(){
      return PRODUCTS.filter(p=>{
        const okQ = !q || (p.name+" "+p.desc+" "+p.cat).toLowerCase().includes(q.toLowerCase());
        const okC = !cat || p.cat === cat;
        return okQ && okC;
      });
    }

    function cartCount(){
      let n=0;
      cart.forEach(v=> n+=v);
      return n;
    }

    function cartTotal(){
      let t=0;
      cart.forEach((qty,id)=>{
        const p = PRODUCTS.find(x=>x.id===id);
        if(!p) return;
        t += (p.price||0) * qty;
      });
      return t;
    }

    function updateCartUI(){
      const n = cartCount();
      el.cartCount.textContent = n;
      el.cartCount2.textContent = n;
    }

    function renderCats(){
      const items = filtered();

      // agrupa por categoria
      const group = new Map();
      items.forEach(p=>{
        if(!group.has(p.cat)) group.set(p.cat, []);
        group.get(p.cat).push(p);
      });

      el.gridCats.innerHTML = "";

      [...group.keys()].sort().forEach(category=>{
        const list = group.get(category);
        const div = document.createElement("div");
        div.className = "catCard";
        div.innerHTML = `
          <div class="catLeft">
            <div class="catName">‚ú® ${category}</div>
            <div class="catDesc">${list.length} item(ns) dispon√≠vel(is)</div>
          </div>
          <div class="badge">${showPrices ? "Pre√ßo vis√≠vel" : "Pre√ßo sob consulta"}</div>
        `;
        div.onclick = ()=>{
          // Ao clicar, abre uma listagem simples no carrinho (como ‚Äúatalho‚Äù):
          // adiciona 1 do primeiro item da categoria
          const first = list[0];
          cart.set(first.id, (cart.get(first.id)||0)+1);
          updateCartUI();
          openCart();
        };
        el.gridCats.appendChild(div);
      });

      updateCartUI();
    }

    function openCart(){
      renderCart();
      el.cartModal.classList.add("show");
    }
    function closeCart(){ el.cartModal.classList.remove("show"); }

    function renderCart(){
      const lines = [];
      cart.forEach((qty,id)=>{
        const p = PRODUCTS.find(x=>x.id===id);
        if(!p) return;
        lines.push({p,qty});
      });

      if(lines.length===0){
        el.cartBody.innerHTML = `<div class="hint" style="margin-top:0">Seu carrinho est√° vazio. Toque numa categoria para adicionar itens (exemplo).</div>`;
      } else {
        el.cartBody.innerHTML = "";
        lines.forEach(({p,qty})=>{
          const unit = (p.price && p.price>0) ? money(p.price) : "Sob consulta";
          const subtotal = (p.price && p.price>0) ? money(p.price*qty) : "‚Äî";

          const row = document.createElement("div");
          row.className = "line";
          row.innerHTML = `
            <div style="display:flex;flex-direction:column;gap:3px">
              <b>${p.name}</b>
              <span>${p.cat} ‚Ä¢ ${showPrices ? ("Unidade: "+unit+" ‚Ä¢ Subtotal: "+subtotal) : "Pre√ßo sob consulta"}</span>
            </div>
            <div class="qty">
              <div class="qbtn" data-dec="${p.id}">‚àí</div>
              <div class="num">${qty}</div>
              <div class="qbtn" data-inc="${p.id}">+</div>
            </div>
          `;
          el.cartBody.appendChild(row);
        });

        document.querySelectorAll("[data-dec]").forEach(x=>{
          x.onclick = ()=>{
            const id = x.getAttribute("data-dec");
            const v = (cart.get(id)||0)-1;
            if(v<=0) cart.delete(id); else cart.set(id,v);
            updateCartUI();
            renderCart();
          };
        });
        document.querySelectorAll("[data-inc]").forEach(x=>{
          x.onclick = ()=>{
            const id = x.getAttribute("data-inc");
            cart.set(id,(cart.get(id)||0)+1);
            updateCartUI();
            renderCart();
          };
        });
      }

      el.cartTotal.textContent = money(cartTotal());
    }

    function buildOrderText(){
      if(cartCount()===0) return "Carrinho vazio.";
      const parts = [];
      cart.forEach((qty,id)=>{
        const p = PRODUCTS.find(x=>x.id===id);
        if(!p) return;
        const priceTxt = (p.price && p.price>0) ? money(p.price) : "Sob consulta";
        parts.push(`${qty}x ${p.name} (${p.cat})${showPrices ? " ‚Äî "+priceTxt : ""}`);
      });
      return `Pedido Faz de Conta:\n- ${parts.join("\n- ")}\n\nTotal: ${money(cartTotal())}\nPagamento: Pix\nChave Pix: ${PIX_KEY}`;
    }

    function copyText(text){
      navigator.clipboard?.writeText(text)
        .then(()=>alert("Copiado!"))
        .catch(()=>alert("N√£o consegui copiar. Selecione e copie manualmente."));
    }

    function openPix(){
      if(cartCount()===0){ alert("Seu carrinho est√° vazio."); return; }
      el.pixKey.textContent = PIX_KEY;
      el.pixSummary.textContent = buildOrderText();
      el.pixTotal.textContent = money(cartTotal());
      el.pixModal.classList.add("show");
    }
    function closePix(){ el.pixModal.classList.remove("show"); }

    function goWhatsOrder(){
      const text = buildOrderText();
      const url = `https://wa.me/${WHATSAPP_PHONE}?text=${encodeURIComponent(text)}`;
      window.open(url, "_blank");
    }

    /* Data e rel√≥gio */
    function tick(){
      const now = new Date();
      const d = now.toLocaleDateString("pt-BR", { weekday:"short", day:"2-digit", month:"2-digit", year:"numeric" });
      const t = now.toLocaleTimeString("pt-BR", { hour:"2-digit", minute:"2-digit", second:"2-digit" });
      el.dateNow.textContent = d.replace(".", "");
      el.timeNow.textContent = t;
    }

    /* Eventos */
    document.getElementById("togglePrices").onclick = ()=>{
      showPrices = !showPrices;
      el.sw.classList.toggle("on", showPrices);
      renderCats();
      renderCart();
    };

    el.q.addEventListener("input", e=>{ q=e.target.value.trim(); renderCats(); });
    el.cat.addEventListener("change", e=>{ cat=e.target.value; renderCats(); });

    document.getElementById("btnClear").onclick = ()=>{
      q=""; cat="";
      el.q.value="";
      el.cat.value="";
      renderCats();
    };

    document.getElementById("btnCart").onclick = openCart;
    document.getElementById("btnCart2").onclick = openCart;
    document.getElementById("closeCart").onclick = closeCart;
    el.cartModal.addEventListener("click", (e)=>{ if(e.target===el.cartModal) closeCart(); });

    document.getElementById("clearCart").onclick = ()=>{
      cart.clear();
      updateCartUI();
      renderCart();
      renderCats();
    };

    document.getElementById("btnPix").onclick = openPix;
    document.getElementById("btnPix2").onclick = openPix;
    document.getElementById("goPix").onclick = ()=>{ closeCart(); openPix(); };

    document.getElementById("closePix").onclick = closePix;
    el.pixModal.addEventListener("click", (e)=>{ if(e.target===el.pixModal) closePix(); });

    document.getElementById("copyPix").onclick = ()=> copyText(PIX_KEY);
    document.getElementById("copyMsg").onclick = ()=> copyText(buildOrderText());
    document.getElementById("pixWhats").onclick = goWhatsOrder;

    /* Start */
    setWhatsappLinks();
    initCats();
    renderCats();
    updateCartUI();
    renderCart();
    tick();
    setInterval(tick, 1000);
  </script>
</body>
</html>
