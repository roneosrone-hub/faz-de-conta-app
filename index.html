<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Faz de Conta Decora√ß√µes</title>
  <meta name="theme-color" content="#0b1430" />
  <style>
    :root{
      --bg0:#070b14;
      --bg1:#0b1430;
      --glass: rgba(255,255,255,.10);
      --glass2: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.14);
      --txt: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.68);
      --muted2: rgba(255,255,255,.55);
      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --r: 22px;
      --grad: linear-gradient(135deg, rgba(255,105,180,.95), rgba(122,232,255,.9), rgba(165,255,135,.9));
      --btn: linear-gradient(90deg, rgba(255,105,180,.95), rgba(165,255,135,.95));
      --ok: rgba(67,230,165,.18);
      --warn: rgba(255,213,91,.18);
      --bad: rgba(255,110,110,.18);
    }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0;
      color:var(--txt);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 700px at 10% 0%, rgba(255,105,180,.16), transparent 60%),
        radial-gradient(900px 600px at 80% 10%, rgba(122,232,255,.14), transparent 55%),
        radial-gradient(900px 700px at 40% 90%, rgba(165,255,135,.12), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      min-height:100%;
      padding: 14px 12px 40px;
    }
    a{ color:inherit; text-decoration:none }
    .wrap{ max-width: 980px; margin: 0 auto; }

    /* Banner */
    .banner-topo{
      display:flex;
      justify-content:center;
      padding: 10px 0 14px;
    }
    .banner-topo img{
      width:100%;
      max-width:520px;
      border-radius: 24px;
      box-shadow: var(--shadow);
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      display:block;
    }

    /* Top bar */
    .top{
      position: sticky;
      top: 10px;
      z-index: 50;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.07);
      border-radius: 26px;
      padding: 14px 14px;
      box-shadow: 0 12px 35px rgba(0,0,0,.35);
    }
    .topRow{
      display:flex;
      gap: 12px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .brand{
      display:flex;
      gap: 10px;
      align-items:center;
      min-width: 240px;
    }
    .logo{
      width: 44px; height:44px;
      border-radius: 14px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      display:flex; align-items:center; justify-content:center;
      font-size:22px;
      flex: 0 0 auto;
      overflow:hidden;
    }
    .logo img{ width:100%; height:100%; object-fit:cover; display:block }
    .t .name{ font-weight:800; letter-spacing:.2px; font-size: 16px; line-height:1.1 }
    .t .slogan{
      font-weight:900;
      font-size: 14px;
      background: var(--grad);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      line-height: 1.1;
      margin-top: 2px;
    }
    .t .sub{ font-size: 12.5px; color: var(--muted); margin-top: 3px }
    .pill{
      display:inline-flex;
      gap:8px;
      align-items:center;
      margin-top: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.05);
      color: var(--muted);
      font-size: 12.5px;
      flex-wrap:wrap;
    }

    .actions{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }
    .btn{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      color: var(--txt);
      padding: 10px 12px;
      border-radius: 999px;
      display:inline-flex;
      gap:10px;
      align-items:center;
      font-weight:700;
      cursor:pointer;
      user-select:none;
    }
    .btnPrimary{
      background: var(--btn);
      border: none;
      color: #081014;
    }
    .btnSmall{ padding: 8px 10px; font-size: 13px }
    .badge{
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,.15);
      background: rgba(255,255,255,.55);
      color:#0b1430;
      font-size: 12px;
      font-weight: 900;
    }

    /* Section */
    .card{
      margin-top: 14px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      border-radius: var(--r);
      box-shadow: 0 16px 40px rgba(0,0,0,.25);
      overflow:hidden;
    }
    .cardPad{ padding: 14px; }
    .title{
      font-size: 26px;
      font-weight: 900;
      letter-spacing: .2px;
      margin:0 0 6px;
    }
    .desc{
      margin:0;
      color: var(--muted);
      line-height:1.35;
    }

    /* controls */
    .controls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 12px;
      align-items:center;
    }
    .input, select{
      width: 100%;
      max-width: 340px;
      padding: 12px 14px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(0,0,0,.20);
      color: var(--txt);
      outline:none;
    }
    .row2{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      margin-top: 10px;
    }
    .toggle{
      display:flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.05);
    }
    .switch{
      width: 44px; height: 26px;
      border-radius: 999px;
      background: rgba(255,255,255,.18);
      border: 1px solid rgba(255,255,255,.22);
      position: relative;
      cursor:pointer;
      flex: 0 0 auto;
    }
    .knob{
      width: 22px; height: 22px;
      border-radius: 999px;
      background: rgba(255,255,255,.85);
      position:absolute;
      top: 1px;
      left: 1px;
      transition: transform .18s ease;
    }
    .switch.on{ background: rgba(67,230,165,.25) }
    .switch.on .knob{ transform: translateX(18px); }

    /* grid */
    .sectionHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin: 10px 0 0;
    }
    .sectionHead h3{
      margin:0;
      font-size: 18px;
      letter-spacing:.2px;
      font-weight: 900;
    }
    .chip{
      font-size: 12px;
      color: var(--muted);
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.05);
      padding: 6px 10px;
      border-radius: 999px;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 12px;
    }
    @media (min-width: 720px){
      .grid{ grid-template-columns: repeat(4, minmax(0, 1fr)); }
    }
    .cat{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.05);
      border-radius: 18px;
      padding: 12px;
      cursor:pointer;
      transition: transform .08s ease;
      min-height: 112px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
    }
    .cat:active{ transform: scale(.99) }
    .cat .ico{ font-size: 26px; }
    .cat .nm{ font-weight: 900; margin-top: 8px; }
    .cat .ds{ font-size: 12px; color: var(--muted); margin-top: 2px; }

    /* Products list */
    .products{ margin-top: 12px; }
    .prodHeader{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
      margin-bottom: 8px;
    }
    .prodHeader .back{
      display:inline-flex;
      align-items:center;
      gap:10px;
      cursor:pointer;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.05);
      font-weight: 800;
    }
    .list{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    @media (min-width: 720px){
      .list{ grid-template-columns: 1fr 1fr; }
    }
    .item{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.05);
      border-radius: 18px;
      overflow:hidden;
      display:flex;
      gap: 10px;
      padding: 10px;
      align-items:center;
    }
    .thumb{
      width: 92px; height: 92px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      flex: 0 0 auto;
      overflow:hidden;
      cursor:pointer;
    }
    .thumb img{ width:100%; height:100%; object-fit:cover; display:block; }
    .meta{ flex: 1 1 auto; min-width: 0; }
    .meta .h{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .meta .name{ font-weight: 900; margin:0; }
    .meta .sub{ margin: 4px 0 0; font-size: 12.5px; color: var(--muted); line-height:1.2 }
    .price{
      font-weight: 900;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      white-space: nowrap;
      font-size: 13px;
    }
    .meta .row{
      margin-top: 10px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }
    .qty{
      display:inline-flex;
      align-items:center;
      gap:8px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      border-radius: 999px;
      padding: 6px 10px;
    }
    .qbtn{
      width: 28px; height: 28px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      font-weight: 900;
      user-select:none;
    }
    .qnum{ min-width: 20px; text-align:center; font-weight:900; }
    .add{
      display:inline-flex;
      align-items:center;
      gap:10px;
      cursor:pointer;
      padding: 10px 12px;
      border-radius: 999px;
      border: none;
      background: var(--btn);
      color:#081014;
      font-weight: 900;
    }

    /* Modal */
    .overlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center;
      justify-content:center;
      padding: 16px;
      z-index: 999;
    }
    .overlay.on{ display:flex; }
    .modal{
      width: min(720px, 100%);
      border-radius: 22px;
      border: 1px solid var(--stroke);
      background: rgba(16,20,40,.92);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      box-shadow: 0 24px 80px rgba(0,0,0,.55);
      overflow:hidden;
    }
    .modalHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,.12);
      gap: 10px;
    }
    .modalHead b{ font-size: 14px; }
    .x{
      width: 40px; height: 40px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: var(--txt);
      display:flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      font-weight: 900;
      user-select:none;
    }
    .modalBody{ padding: 12px; }
    .big{
      width:100%;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.25);
      overflow:hidden;
    }
    .big img{ width:100%; height:auto; display:block; }

    /* Cart */
    .cartList{ display:flex; flex-direction:column; gap:10px; }
    .cartItem{
      display:flex;
      gap:10px;
      align-items:center;
      border:1px solid rgba(255,255,255,.12);
      border-radius: 16px;
      padding: 10px;
      background: rgba(255,255,255,.05);
    }
    .cartItem .n{ font-weight:900; }
    .cartItem .m{ color: var(--muted); font-size: 12px; }
    .right{ margin-left:auto; text-align:right; }
    .tot{
      margin-top: 12px;
      padding: 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.05);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      flex-wrap:wrap;
    }
    .tot b{ font-size: 16px; }
    .note{
      color: var(--muted);
      font-size: 12.5px;
      line-height:1.35;
    }

    /* footer hint */
    .hint{
      margin-top: 10px;
      font-size: 12.5px;
      color: var(--muted);
      padding: 10px 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- ‚úÖ BANNER (A SUA IMAGEM) -->
    <!-- Se quiser, pode trocar o nome do arquivo aqui: -->
    <div class="banner-topo">
      <img src="20260102_130931.jpg" alt="Faz de Conta Decora√ß√µes"
           onerror="this.style.display='none'">
    </div>

    <!-- TOPO FIXO -->
    <div class="top">
      <div class="topRow">
        <div class="brand">
          <div class="logo" title="Logo">
            <!-- opcional: se voc√™ tiver um arquivo logo.jpg/png, troque aqui -->
            <img src="20260102_130931.jpg" alt="Logo" onerror="this.parentNode.textContent='üßö'">
          </div>
          <div class="t">
            <div class="name">Faz de Conta Decora√ß√µes</div>
            <div class="slogan">Onde a imagina√ß√£o vira festa</div>
            <div class="sub">Decora√ß√µes encantadoras para momentos especiais</div>
            <div class="pill">üìç Jaciara/MT ‚Ä¢ üì± WhatsApp: (66) 99622-3481</div>
          </div>
        </div>

        <div class="actions">
          <a class="btn btnSmall" id="btnWhats" href="#" target="_blank" rel="noopener">üí¨ Falar no WhatsApp</a>
          <div class="btn btnSmall" id="btnCart">üõí Carrinho <span class="badge" id="cartCount">0</span></div>
        </div>
      </div>
    </div>

    <!-- SE√á√ÉO PRINCIPAL -->
    <div class="card">
      <div class="cardPad">
        <h1 class="title">Escolha o que voc√™ quer alugar</h1>
        <p class="desc">Toque nas categorias para ver as op√ß√µes com fotos e pre√ßos. Voc√™ pode ligar/desligar a exibi√ß√£o de valores.</p>

        <div class="row2">
          <div class="toggle">
            <span>üîí Mostrar pre√ßos</span>
            <div class="switch" id="swPrices"><div class="knob"></div></div>
          </div>

          <div class="btn btnPrimary" id="btnPix">‚úÖ Finalizar (Pix)</div>
        </div>

        <div class="controls">
          <input class="input" id="q" placeholder="üîé Pesquisar (ex: urso, arco, cortina)..." />
          <select id="catSel">
            <option value="all">Todas as categorias</option>
          </select>
          <div class="btn" id="btnClear">Limpar</div>
        </div>

        <div class="hint">
          üí° <b>Fotos:</b> envie as imagens para o GitHub (na raiz) e use nomes simples.  
          Ex.: <b>urso-rosa.jpg</b> / <b>arco-rosa.jpg</b> / <b>cortina-dourada.jpg</b>.  
          (Por enquanto, deixei imagens padr√£o; voc√™ troca depois.)
        </div>

        <div class="sectionHead">
          <h3>‚ú® Categorias</h3>
          <span class="chip" id="priceTag">Pre√ßo: sob consulta</span>
        </div>

        <div class="grid" id="cats"></div>

        <div class="products" id="products" style="display:none;">
          <div class="prodHeader">
            <div class="back" id="btnBack">‚¨ÖÔ∏è Voltar</div>
            <div class="chip" id="catTitle">Categoria</div>
          </div>
          <div class="list" id="list"></div>
        </div>
      </div>
    </div>

  </div>

  <!-- MODAL -->
  <div class="overlay" id="ov">
    <div class="modal" id="modal">
      <div class="modalHead">
        <b id="mTitle">Detalhes</b>
        <div class="x" id="x">‚úï</div>
      </div>
      <div class="modalBody" id="mBody"></div>
    </div>
  </div>

<script>
  // ====== CONFIGURA√á√ïES R√ÅPIDAS ======
  const WHATS_NUMBER = "5566996223481"; // (55 + DDD + n√∫mero) sem espa√ßos
  const PIX_CHAVE = "SUA_CHAVE_PIX_AQUI"; // troque depois (CPF/CNPJ/celular/email/chave aleat√≥ria)
  const PIX_NOME  = "Faz de Conta Decora√ß√µes"; // nome recebedor (informativo)
  const PIX_CIDADE = "Jaciara"; // informativo

  // Se voc√™ renomear a sua imagem para "banner.jpg", troque aqui tamb√©m:
  const DEFAULT_IMG = "20260102_130931.jpg";

  // ====== DADOS (VOC√ä PODE EDITAR DEPOIS) ======
  const data = [
    {
      id:"cubos", name:"Cubo", icon:"üßä", desc:"Estruturas e suportes",
      items:[
        { id:"cubo-1", name:"Cubo decorativo (P)", desc:"Cubo para apoio de itens/bolo", price:35, img: DEFAULT_IMG },
        { id:"cubo-2", name:"Cubo decorativo (G)", desc:"Estrutura maior para destaque", price:55, img: DEFAULT_IMG }
      ]
    },
    {
      id:"arco-baloes", name:"Arco de bal√µes", icon:"üéà", desc:"Arcos org√¢nicos e tem√°ticos",
      items:[
        { id:"arco-1", name:"Arco org√¢nico (2m)", desc:"Ideal para fotos e entrada", price:180, img: DEFAULT_IMG },
        { id:"arco-2", name:"Arco org√¢nico (3m)", desc:"Mais completo e chamativo", price:260, img: DEFAULT_IMG }
      ]
    },
    {
      id:"tapetes", name:"Tapetes", icon:"üß∫", desc:"Base para fotos e cen√°rio",
      items:[
        { id:"tap-1", name:"Tapete neutro", desc:"Combina com qualquer tema", price:25, img: DEFAULT_IMG },
        { id:"tap-2", name:"Tapete tem√°tico", desc:"Escolha cor/tema", price:35, img: DEFAULT_IMG }
      ]
    },
    {
      id:"arandelas", name:"Arandelas", icon:"üí°", desc:"Ilumina√ß√£o e destaque",
      items:[
        { id:"ara-1", name:"Arandela LED", desc:"Luz aconchegante para o cen√°rio", price:20, img: DEFAULT_IMG },
        { id:"ara-2", name:"Arandela dupla", desc:"Mais destaque e brilho", price:35, img: DEFAULT_IMG }
      ]
    },
    {
      id:"baloes", name:"Bal√µes", icon:"üéâ", desc:"Cores, temas e combos",
      items:[
        { id:"bal-1", name:"Combo bal√µes (P)", desc:"Kit b√°sico para complementar", price:35, img: DEFAULT_IMG },
        { id:"bal-2", name:"Combo bal√µes (G)", desc:"Kit maior e mais completo", price:65, img: DEFAULT_IMG }
      ]
    },
    {
      id:"ursos", name:"Ursos", icon:"üß∏", desc:"Ursinhos e pel√∫cias decorativas",
      items:[
        { id:"urs-1", name:"Urso decorativo (P)", desc:"Fofo para tema baby/infantil", price:25, img: DEFAULT_IMG },
        { id:"urs-2", name:"Urso decorativo (G)", desc:"Destaque para painel", price:45, img: DEFAULT_IMG }
      ]
    },
    {
      id:"arco-quadrado", name:"Arco quadrado", icon:"üü¶", desc:"Estrutura quadrada para cen√°rio",
      items:[
        { id:"aq-1", name:"Arco quadrado (P)", desc:"Estrutura compacta", price:90, img: DEFAULT_IMG },
        { id:"aq-2", name:"Arco quadrado (G)", desc:"Estrutura grande e marcante", price:140, img: DEFAULT_IMG }
      ]
    },
    {
      id:"cortina", name:"Cortina", icon:"üéÄ", desc:"Fundo e acabamento",
      items:[
        { id:"cor-1", name:"Cortina (2m)", desc:"Fundo simples e elegante", price:40, img: DEFAULT_IMG },
        { id:"cor-2", name:"Cortina (3m)", desc:"Fundo maior (mais cobertura)", price:60, img: DEFAULT_IMG }
      ]
    }
  ];

  // ====== ESTADO ======
  let showPrices = false;
  let currentCat = null;
  const cart = new Map(); // id -> qty

  // ====== ELEMENTOS ======
  const elCats = document.getElementById("cats");
  const elProducts = document.getElementById("products");
  const elList = document.getElementById("list");
  const elCatTitle = document.getElementById("catTitle");
  const elBack = document.getElementById("btnBack");
  const elQ = document.getElementById("q");
  const elSel = document.getElementById("catSel");
  const elClear = document.getElementById("btnClear");
  const elSw = document.getElementById("swPrices");
  const elPriceTag = document.getElementById("priceTag");
  const elCartCount = document.getElementById("cartCount");
  const elBtnCart = document.getElementById("btnCart");
  const elBtnPix = document.getElementById("btnPix");
  const elBtnWhats = document.getElementById("btnWhats");

  const ov = document.getElementById("ov");
  const mTitle = document.getElementById("mTitle");
  const mBody = document.getElementById("mBody");
  const x = document.getElementById("x");

  // ====== HELPERS ======
  const money = (v)=> "R$ " + (v||0).toFixed(2).replace(".", ",");
  function updateWhatsLink(message){
    const text = encodeURIComponent(message || "Ol√°! Quero fazer um or√ßamento com a Faz de Conta Decora√ß√µes üòä");
    elBtnWhats.href = `https://wa.me/${WHATS_NUMBER}?text=${text}`;
  }
  updateWhatsLink();

  function renderCats(){
    elCats.innerHTML = "";
    data.forEach(c=>{
      const div = document.createElement("div");
      div.className="cat";
      div.innerHTML = `
        <div class="ico">${c.icon}</div>
        <div>
          <div class="nm">${c.name}</div>
          <div class="ds">${c.desc}</div>
        </div>
      `;
      div.onclick = ()=> openCategory(c.id);
      elCats.appendChild(div);
    });
  }

  function fillSelect(){
    data.forEach(c=>{
      const op = document.createElement("option");
      op.value = c.id;
      op.textContent = c.name;
      elSel.appendChild(op);
    });
  }

  function openCategory(catId){
    currentCat = catId;
    const cat = data.find(x=>x.id===catId);
    elProducts.style.display = "";
    elCatTitle.textContent = cat ? cat.name : "Categoria";
    renderItems();
    window.scrollTo({top: 0, behavior: "smooth"});
  }

  function closeCategory(){
    currentCat = null;
    elProducts.style.display = "none";
    elList.innerHTML = "";
  }

  function getVisibleItems(){
    const q = (elQ.value || "").trim().toLowerCase();
    const sel = elSel.value;

    let cats = data;
    if(currentCat){
      cats = data.filter(c=>c.id===currentCat);
    }else if(sel !== "all"){
      cats = data.filter(c=>c.id===sel);
    }

    let items = [];
    cats.forEach(c=>{
      c.items.forEach(it=> items.push({...it, cat: c.name, catId: c.id}));
    });

    if(q){
      items = items.filter(it =>
        it.name.toLowerCase().includes(q) ||
        (it.desc||"").toLowerCase().includes(q) ||
        (it.cat||"").toLowerCase().includes(q)
      );
    }
    return items;
  }

  function renderItems(){
    const items = getVisibleItems();
    elList.innerHTML = "";

    items.forEach(it=>{
      const qty = cart.get(it.id) || 0;
      const div = document.createElement("div");
      div.className="item";
      div.innerHTML = `
        <div class="thumb" title="Ver foto">
          <img src="${it.img || DEFAULT_IMG}" alt="${it.name}"
               onerror="this.src='${DEFAULT_IMG}'">
        </div>
        <div class="meta">
          <div class="h">
            <p class="name">${it.name}</p>
            <span class="price">${showPrices ? money(it.price) : "sob consulta"}</span>
          </div>
          <p class="sub">${it.desc || ""}</p>
          <div class="row">
            <div class="qty">
              <div class="qbtn" data-act="dec">‚àí</div>
              <div class="qnum">${qty}</div>
              <div class="qbtn" data-act="inc">+</div>
            </div>
            <button class="add">Adicionar</button>
          </div>
        </div>
      `;

      const thumb = div.querySelector(".thumb");
      thumb.onclick = ()=> openImage(it.name, it.img || DEFAULT_IMG);

      const qbtns = div.querySelectorAll(".qbtn");
      qbtns.forEach(b=>{
        b.onclick = ()=>{
          if(b.dataset.act==="inc") add(it.id, 1);
          else add(it.id, -1);
          renderItems();
        };
      });

      div.querySelector(".add").onclick = ()=>{
        add(it.id, 1);
        renderItems();
        toast(`‚úÖ ${it.name} adicionado ao carrinho`);
      };

      elList.appendChild(div);
    });
  }

  function add(id, delta){
    const cur = cart.get(id) || 0;
    const next = Math.max(0, cur + delta);
    if(next===0) cart.delete(id);
    else cart.set(id, next);
    updateCartCount();
  }

  function updateCartCount(){
    let total = 0;
    cart.forEach(v=> total += v);
    elCartCount.textContent = total;
  }

  function openModal(title, html){
    mTitle.textContent = title || "Detalhes";
    mBody.innerHTML = html;
    ov.classList.add("on");
  }
  function closeModal(){ ov.classList.remove("on"); }

  function openImage(title, src){
    openModal(title, `
      <div class="big">
        <img src="${src}" alt="${title}" onerror="this.src='${DEFAULT_IMG}'">
      </div>
      <div style="margin-top:10px" class="note">
        Se quiser trocar a foto deste item, envie uma imagem para o GitHub e depois altere o nome no item.
      </div>
    `);
  }

  function cartSummary(){
    // mapa id -> item
    const all = [];
    data.forEach(c=> c.items.forEach(it=> all.push(it)));
    const byId = new Map(all.map(it=> [it.id, it]));

    let lines = [];
    let total = 0;

    cart.forEach((qty, id)=>{
      const it = byId.get(id);
      if(!it) return;
      const sub = (it.price || 0) * qty;
      total += sub;
      lines.push({name: it.name, qty, price: it.price || 0, sub});
    });

    return {lines, total};
  }

  function openCart(){
    const {lines, total} = cartSummary();

    if(lines.length===0){
      openModal("Seu carrinho", `<div class="note">Seu carrinho est√° vazio. Adicione itens para finalizar.</div>`);
      return;
    }

    const htmlLines = lines.map(l=>`
      <div class="cartItem">
        <div>
          <div class="n">${l.name}</div>
          <div class="m">Qtd: <b>${l.qty}</b> ‚Ä¢ ${showPrices ? money(l.price) : "Pre√ßo sob consulta"}</div>
        </div>
        <div class="right">
          <div class="m">${showPrices ? "Subtotal" : "Subtotal"}</div>
          <div class="n">${showPrices ? money(l.sub) : "‚Äî"}</div>
        </div>
      </div>
    `).join("");

    const totalHtml = `
      <div class="tot">
        <div>
          <div class="note">Total</div>
          <b>${showPrices ? money(total) : "Sob consulta"}</b>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap">
          <div class="btn btnSmall" onclick="(${clearCart.toString()})();">üßπ Limpar carrinho</div>
          <div class="btn btnSmall btnPrimary" onclick="(${openPix.toString()})();">‚úÖ Finalizar (Pix)</div>
        </div>
      </div>
      <div class="note" style="margin-top:10px">
        *Se voc√™ deixar os pre√ßos desligados, o Pix fica como <b>reserva/or√ßamento</b> e voc√™ confirma o valor pelo WhatsApp.
      </div>
    `;

    openModal("Seu carrinho", `<div class="cartList">${htmlLines}</div>${totalHtml}`);
  }

  function clearCart(){
    cart.clear();
    updateCartCount();
    renderItems();
    closeModal();
    toast("Carrinho limpo");
  }

  function buildWhatsMessage(){
    const {lines, total} = cartSummary();
    let msg = "Ol√°! Quero alugar estes itens:\n\n";
    lines.forEach(l=>{
      msg += `‚Ä¢ ${l.name} (Qtd: ${l.qty})\n`;
    });
    msg += "\n";
    if(showPrices){
      msg += `Total estimado: ${money(total)}\n`;
      msg += "Pagamento via Pix.\n";
    }else{
      msg += "Pode me passar o valor total e disponibilidade?\n";
    }
    msg += "\nMeu nome: ";
    return msg;
  }

  function openPix(){
    const {lines, total} = cartSummary();
    if(lines.length===0){
      openModal("Finalizar (Pix)", `<div class="note">Seu carrinho est√° vazio. Adicione itens antes de finalizar.</div>`);
      return;
    }

    const msg = buildWhatsMessage();
    updateWhatsLink(msg);

    const amount = showPrices ? total : 0;

    openModal("Finalizar (Pix)", `
      <div class="note">
        <b>Como funciona:</b><br>
        1) Voc√™ envia o pedido pelo WhatsApp.<br>
        2) Eu confirmo disponibilidade e valor final.<br>
        ${showPrices ? "3) Voc√™ paga via Pix e confirma.\n" : "3) Pix serve para reserva ap√≥s confirma√ß√£o do valor.\n"}
      </div>

      <div style="height:10px"></div>

      <div class="card" style="margin-top:0">
        <div class="cardPad">
          <div style="display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between">
            <div>
              <div class="note">Chave Pix</div>
              <b style="font-size:15px">${PIX_CHAVE}</b>
              <div class="note" style="margin-top:6px">${PIX_NOME} ‚Ä¢ ${PIX_CIDADE}</div>
            </div>
            <div class="btn btnPrimary" onclick="navigator.clipboard.writeText('${PIX_CHAVE}'); toast('‚úÖ Chave Pix copiada');">üìã Copiar Pix</div>
          </div>

          <div style="margin-top:12px" class="note">
            ${showPrices ? `<b>Total estimado:</b> ${money(total)}` : `<b>Total:</b> ser√° confirmado no WhatsApp`}
          </div>

          <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap">
            <a class="btn btnPrimary" href="https://wa.me/${WHATS_NUMBER}?text=${encodeURIComponent(msg)}" target="_blank" rel="noopener">üí¨ Enviar pedido no WhatsApp</a>
            <div class="btn" onclick="(${openCart.toString()})();">üõí Ver carrinho</div>
          </div>
        </div>
      </div>
    `);
  }

  // Toast simples
  let tmr=null;
  function toast(text){
    clearTimeout(tmr);
    let el = document.getElementById("toast");
    if(!el){
      el = document.createElement("div");
      el.id="toast";
      el.style.position="fixed";
      el.style.left="50%";
      el.style.bottom="18px";
      el.style.transform="translateX(-50%)";
      el.style.padding="10px 12px";
      el.style.borderRadius="999px";
      el.style.border="1px solid rgba(255,255,255,.14)";
      el.style.background="rgba(10,12,20,.92)";
      el.style.backdropFilter="blur(12px)";
      el.style.color="rgba(255,255,255,.92)";
      el.style.fontWeight="800";
      el.style.fontSize="13px";
      el.style.zIndex="9999";
      document.body.appendChild(el);
    }
    el.textContent = text;
    el.style.opacity="1";
    tmr=setTimeout(()=>{ el.style.opacity="0"; }, 1800);
  }

  // ====== EVENTOS ======
  elSw.onclick = ()=>{
    showPrices = !showPrices;
    elSw.classList.toggle("on", showPrices);
    elPriceTag.textContent = "Pre√ßo: " + (showPrices ? "vis√≠vel" : "sob consulta");
    renderItems();
  };

  elBack.onclick = closeCategory;

  elQ.oninput = ()=> renderItems();
  elSel.onchange = ()=> { if(!currentCat) renderItems(); };

  elClear.onclick = ()=>{
    elQ.value="";
    elSel.value="all";
    if(currentCat) closeCategory();
    renderItems();
  };

  elBtnCart.onclick = openCart;
  elBtnPix.onclick = openPix;

  ov.onclick = (e)=>{
    if(e.target===ov) closeModal();
  };
  x.onclick = closeModal;

  // init
  fillSelect();
  renderCats();
  renderItems();
  updateCartCount();
  updateWhatsLink();

</script>
</body>
</html>
