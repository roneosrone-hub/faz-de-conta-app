<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Faz de Conta Decora√ß√µes</title>
  <style>
    :root{
      --bg0:#070a16;
      --bg1:#0b1230;
      --glass: rgba(255,255,255,.08);
      --glass2: rgba(255,255,255,.12);
      --stroke: rgba(255,255,255,.14);
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);
      --muted2: rgba(255,255,255,.55);
      --shadow: 0 22px 70px rgba(0,0,0,.55);
      --r: 26px;
      --r2: 20px;
      --grad: linear-gradient(135deg,#ff4fd8,#8b5cff,#35d6ff,#71ff7a);
      --ok: rgba(60, 255, 170, .15);
      --danger: rgba(255, 90, 90, .15);
      --warn: rgba(255, 210, 85, .15);
      --tap: 48px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 700px at 10% 10%, rgba(255,79,216,.22), transparent 55%),
        radial-gradient(900px 600px at 80% 20%, rgba(53,214,255,.18), transparent 55%),
        radial-gradient(900px 700px at 70% 85%, rgba(113,255,122,.14), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      min-height:100%;
    }

    a{color:inherit; text-decoration:none}
    .wrap{max-width:1100px; margin:0 auto; padding:14px 14px 120px}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.09), rgba(255,255,255,.06));
      border: 1px solid var(--stroke);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    /* TOP APP BAR */
    .topbar{
      position: sticky;
      top: 10px;
      z-index: 50;
      padding: 12px;
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
    }
    .brand{
      display:flex;
      gap:10px;
      align-items:center;
      min-width: 180px;
    }
    .brandLogo{
      width:42px; height:42px; border-radius: 16px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      display:grid; place-items:center;
      overflow:hidden;
      flex:0 0 auto;
    }
    .brandLogo img{width:100%; height:100%; object-fit:cover; display:block}
    .brandText{line-height:1.05}
    .brandText .name{font-weight:800; letter-spacing:.2px}
    .brandText .slogan{
      margin-top:4px;
      font-weight:700;
      background: var(--grad);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-size: 13px;
    }

    .search{
      flex:1;
      display:flex;
      gap:10px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.12);
      min-height: var(--tap);
    }
    .search input{
      width:100%;
      border:0;
      outline:0;
      background: transparent;
      color:var(--text);
      font-size: 15px;
    }
    .pill{
      display:flex;
      gap:8px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      min-height: var(--tap);
      white-space:nowrap;
    }

    .btn{
      cursor:pointer;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      color:var(--text);
      border-radius: 18px;
      padding: 12px 14px;
      min-height: var(--tap);
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      user-select:none;
      transition: transform .08s ease, background .2s ease;
    }
    .btn:active{transform: scale(.98)}
    .btnGrad{
      background: var(--grad);
      border:0;
      color:#081014;
      font-weight:800;
    }
    .btnGhost{
      background: rgba(0,0,0,.10);
    }
    .btnSmall{
      padding: 10px 12px;
      border-radius: 16px;
      min-height: 44px;
    }

    /* HERO / BANNER */
    .hero{
      margin-top: 14px;
      padding: 12px;
      overflow:hidden;
    }
    .heroGrid{
      display:grid;
      grid-template-columns: 1.2fr .8fr;
      gap: 14px;
      align-items: stretch;
    }

    .banner{
      position:relative;
      border-radius: calc(var(--r) - 6px);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      min-height: 280px;
    }
    .banner img{
      width:100%;
      height: 420px;            /* <<< ALTURA DO BANNER (mude aqui) */
      object-fit: cover;
      display:block;
      filter: saturate(1.05) contrast(1.03);
    }
    .banner::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.10), rgba(0,0,0,.55));
      pointer-events:none;
    }
    .bannerOverlay{
      position:absolute;
      left: 16px;
      right: 16px;
      bottom: 16px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      z-index:2;
    }
    .bannerTitle{
      font-size: 22px;
      font-weight: 900;
      letter-spacing:.2px;
      margin:0;
    }
    .bannerSub{
      margin: 6px 0 0;
      color: var(--muted);
      font-weight: 600;
      font-size: 14px;
      max-width: 560px;
    }

    .infoBox{
      padding: 14px;
      border-radius: calc(var(--r) - 6px);
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      display:flex;
      flex-direction:column;
      gap: 12px;
      justify-content:space-between;
    }
    .infoLine{
      display:flex;
      gap:10px;
      align-items:center;
      color:var(--muted);
      font-weight:600;
      flex-wrap:wrap;
    }

    /* CONTROLS */
    .controls{
      margin-top: 14px;
      padding: 14px;
    }
    .controls h2{
      margin:0 0 6px;
      font-size: 28px;
      font-weight: 950;
      letter-spacing:.2px;
    }
    .controls p{margin:0 0 14px; color: var(--muted); font-weight:600}
    .row{
      display:flex; gap:12px; flex-wrap:wrap; align-items:center;
    }
    .toggle{
      display:flex; gap:10px; align-items:center;
      padding: 10px 12px;
      border-radius: 18px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.06);
      min-height: var(--tap);
    }
    .switch{
      width: 54px; height: 30px;
      border-radius: 999px;
      background: rgba(0,0,0,.25);
      border:1px solid rgba(255,255,255,.15);
      position: relative;
      flex:0 0 auto;
    }
    .knob{
      width: 26px; height: 26px;
      border-radius: 999px;
      background: rgba(255,255,255,.85);
      position:absolute;
      top: 1px; left: 1px;
      transition: left .18s ease;
    }
    .switch.on{background: rgba(75,255,180,.18)}
    .switch.on .knob{left: 26px}
    select, .input{
      border:1px solid var(--stroke);
      background: rgba(0,0,0,.15);
      color: var(--text);
      padding: 12px 14px;
      border-radius: 18px;
      min-height: var(--tap);
      outline:0;
    }
    select{cursor:pointer}
    .hint{
      margin-top: 10px;
      color: var(--muted2);
      font-weight:600;
      font-size: 13px;
      background: rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 18px;
      padding: 10px 12px;
    }

    /* GRID */
    .grid{
      margin-top: 14px;
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 14px;
    }

    .catBar{
      grid-column: 1 / -1;
      padding: 10px 12px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .badge{
      padding: 8px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.10);
      color: var(--muted);
      font-weight:800;
      font-size: 12px;
      letter-spacing:.2px;
    }

    .product{
      grid-column: span 6;
      padding: 12px;
      overflow:hidden;
      position: relative;
    }
    @media (min-width: 820px){
      .product{grid-column: span 4;}
    }
    .pImg{
      border-radius: 18px;
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      aspect-ratio: 4/3;
      position:relative;
    }
    .pImg img{
      width:100%; height:100%;
      object-fit: cover;
      display:block;
      filter: saturate(1.06) contrast(1.02);
    }
    .pMeta{padding: 10px 2px 0}
    .pName{margin:0; font-weight:900; font-size: 16px}
    .pDesc{margin:6px 0 0; color: var(--muted); font-weight:600; font-size: 13px; min-height: 34px}
    .pBottom{
      margin-top: 10px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .price{
      font-weight: 950;
      font-size: 16px;
      letter-spacing:.2px;
    }
    .price small{font-weight:800; color:var(--muted); margin-left:6px}

    /* MODAL */
    .backdrop{
      position: fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:flex-end;
      justify-content:center;
      z-index: 200;
      padding: 12px;
    }
    .backdrop.show{display:flex}
    .modal{
      width: min(720px, 100%);
      border-radius: 26px;
      border:1px solid rgba(255,255,255,.16);
      background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.08));
      box-shadow: var(--shadow);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      overflow:hidden;
    }
    .modalHead{
      padding: 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      border-bottom:1px solid rgba(255,255,255,.10);
    }
    .modalHead h3{margin:0; font-size: 16px; font-weight: 950}
    .modalBody{padding: 14px; max-height: 65vh; overflow:auto}
    .line{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap: 12px;
      padding: 10px 0;
      border-bottom:1px dashed rgba(255,255,255,.12);
    }
    .line:last-child{border-bottom:0}
    .line .left{display:flex; flex-direction:column; gap:3px}
    .line .left b{font-weight: 950}
    .line .left span{color:var(--muted); font-weight:600; font-size: 13px}
    .qty{
      display:flex; gap:8px; align-items:center;
    }
    .qty .qbtn{
      width:42px; height:42px; border-radius: 14px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.12);
      color:var(--text);
      display:grid; place-items:center;
      font-size: 18px;
      cursor:pointer;
    }
    .qty .num{min-width: 24px; text-align:center; font-weight: 900}
    .modalFoot{
      padding: 14px;
      border-top:1px solid rgba(255,255,255,.10);
      display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between;
    }
    .total{
      font-weight: 950;
      font-size: 18px;
    }
    .copyBox{
      margin-top: 10px;
      padding: 12px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.12);
      color: var(--muted);
      font-weight:700;
      font-size: 13px;
      line-height:1.35;
    }
    .copyRow{
      margin-top: 10px;
      display:flex; gap:10px; flex-wrap:wrap;
    }
    .mono{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-weight:800;
      color: var(--text);
      word-break: break-all;
    }

    /* FOOT FIXED ACTIONS (mobile feel) */
    .bottomBar{
      position: fixed;
      left:0; right:0; bottom: 10px;
      display:flex;
      justify-content:center;
      z-index: 60;
      pointer-events:none;
    }
    .bottomInner{
      pointer-events:auto;
      width: min(1100px, calc(100% - 20px));
      display:flex;
      gap: 10px;
      padding: 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.22);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .bottomInner .btn{flex:1}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- TOPBAR -->
    <div class="topbar card">
      <div class="brand">
        <div class="brandLogo">
          <!-- Logo pequeno (pode trocar o arquivo) -->
          <img src="logo.jpg" alt="Logo" onerror="this.src=window.__placeholderLogo" />
        </div>
        <div class="brandText">
          <div class="name">Faz de Conta Decora√ß√µes</div>
          <div class="slogan">Onde a imagina√ß√£o vira festa</div>
        </div>
      </div>

      <div class="search">
        üîé
        <input id="q" type="search" placeholder="Buscar (ex: urso, arco, cortina)..." />
      </div>

      <div class="pill" title="Cidade">
        üìç <span>Jaciara/MT</span>
      </div>
    </div>

    <!-- HERO -->
    <div class="hero card">
      <div class="heroGrid">
        <div class="banner">
          <!-- FOTO GRANDE DO TOPO: troque o arquivo abaixo pelo nome da sua imagem -->
          <img id="heroImg" src="banner.jpg" alt="Faz de Conta" onerror="this.src=window.__placeholderBanner" />
          <div class="bannerOverlay">
            <div>
              <p class="bannerTitle">Cat√°logo de loca√ß√£o</p>
              <p class="bannerSub">Escolha itens, veja detalhes e monte seu pedido. Finalize por Pix ou chame no WhatsApp.</p>
            </div>
          </div>
        </div>

        <div class="infoBox">
          <div class="infoLine">‚ú® <span><b>Decora√ß√µes encantadoras</b> para momentos especiais</span></div>
          <div class="infoLine">üì± <span><b>WhatsApp:</b> (66) 99622-3481</span></div>
          <div class="infoLine">‚è±Ô∏è <span>Montagem <b>inclusa</b> ou <b>separada</b> ‚Ä¢ Temas personalizados</span></div>

          <div class="row">
            <button class="btn btnGhost" id="btnWpp">üí¨ Falar no WhatsApp</button>
            <button class="btn btnGrad" id="btnCart">üõí Carrinho (<span id="cartCount">0</span>)</button>
          </div>
        </div>
      </div>
    </div>

    <!-- CONTROLS -->
    <div class="controls card">
      <h2>Escolha o que voc√™ quer alugar</h2>
      <p>Toque nos itens para ver e adicionar no carrinho. Voc√™ pode ligar/desligar a exibi√ß√£o de valores.</p>

      <div class="row">
        <div class="toggle" id="togglePrices" role="button" aria-label="Mostrar pre√ßos">
          üîí <b>Mostrar pre√ßos</b>
          <div class="switch" id="sw"><div class="knob"></div></div>
        </div>

        <select id="cat">
          <option value="">Todas as categorias</option>
        </select>

        <button class="btn btnSmall" id="btnClear">üßπ Limpar</button>

        <button class="btn btnGrad" id="btnPix">‚úÖ Finalizar (Pix)</button>
      </div>

      <div class="hint">
        <b>Fotos:</b> envie suas imagens para o GitHub (na raiz) e use nomes simples.
        Ex.: <span class="mono">urso-rosa.jpg</span>, <span class="mono">arco-rosa.jpg</span>, <span class="mono">cortina-dourada.jpg</span><br>
        <b>IMPORTANTE:</b> para o topo funcionar, coloque na raiz do repo:
        <span class="mono">banner.jpg</span> (foto grande) e <span class="mono">logo.jpg</span> (logo pequena).
      </div>
    </div>

    <!-- GRID -->
    <div class="grid" id="grid"></div>
  </div>

  <!-- Bottom mobile bar -->
  <div class="bottomBar">
    <div class="bottomInner">
      <button class="btn btnGhost" id="btnWpp2">üí¨ WhatsApp</button>
      <button class="btn btnGrad" id="btnCart2">üõí Carrinho (<span id="cartCount2">0</span>)</button>
      <button class="btn btnGrad" id="btnPix2">‚úÖ Pix</button>
    </div>
  </div>

  <!-- CART MODAL -->
  <div class="backdrop" id="cartModal">
    <div class="modal">
      <div class="modalHead">
        <h3>üõí Seu carrinho</h3>
        <button class="btn btnSmall" id="closeCart">‚úñ</button>
      </div>
      <div class="modalBody" id="cartBody"></div>
      <div class="modalFoot">
        <div class="total">Total: <span id="cartTotal">R$ 0,00</span></div>
        <div class="row" style="margin-left:auto">
          <button class="btn btnSmall" id="clearCart">üóëÔ∏è Limpar</button>
          <button class="btn btnGrad" id="goPix">‚úÖ Finalizar (Pix)</button>
        </div>
      </div>
    </div>
  </div>

  <!-- PIX MODAL -->
  <div class="backdrop" id="pixModal">
    <div class="modal">
      <div class="modalHead">
        <h3>‚úÖ Finalizar (Pix)</h3>
        <button class="btn btnSmall" id="closePix">‚úñ</button>
      </div>
      <div class="modalBody">
        <div class="copyBox">
          <div><b>1)</b> Copie a chave Pix abaixo e fa√ßa o pagamento no seu banco.</div>
          <div><b>2)</b> Depois, clique em <b>‚ÄúEnviar pedido no WhatsApp‚Äù</b> para confirmar.</div>
        </div>

        <div class="copyBox" style="border-color: rgba(255,255,255,.16)">
          <div><b>Chave Pix:</b></div>
          <div class="mono" id="pixKey"></div>
          <div class="copyRow">
            <button class="btn btnSmall" id="copyPix">üìã Copiar chave</button>
            <button class="btn btnSmall" id="copyMsg">üìã Copiar pedido</button>
          </div>
        </div>

        <div class="copyBox">
          <div><b>Resumo do pedido:</b></div>
          <div class="mono" id="pixSummary"></div>
        </div>
      </div>
      <div class="modalFoot">
        <div class="total">Total: <span id="pixTotal">R$ 0,00</span></div>
        <div class="row" style="margin-left:auto">
          <button class="btn btnGhost" id="pixWhats">üí¨ Enviar pedido no WhatsApp</button>
        </div>
      </div>
    </div>
  </div>

<script>
/* =========================
   CONFIG (edite aqui)
========================= */
const WHATSAPP_PHONE = "5566996223481"; // 55 + DDD + n√∫mero (sem espa√ßos)
const PIX_KEY = "SUA_CHAVE_PIX_AQUI";   // <- TROQUE pela sua chave Pix (CPF, CNPJ, e-mail, telefone ou aleat√≥ria)

/* Fotos:
   - banner.jpg  (imagem grande do topo)
   - logo.jpg    (logo pequena no cabe√ßalho)
   - fotos dos produtos: coloque na raiz do repo e use o nome no campo image
*/

const PRODUCTS = [
  { id:"arco-1", cat:"Arco de bal√µes", name:"Arco Org√¢nico (P)", desc:"Arco org√¢nico para entrada ou mesa.", price:180, image:"arco-rosa.jpg" },
  { id:"arco-2", cat:"Arco de bal√µes", name:"Arco Org√¢nico (M)", desc:"Tamanho m√©dio, ideal para cen√°rio.", price:260, image:"arco-colorido.jpg" },
  { id:"arco-3", cat:"Arco de bal√µes", name:"Arco Org√¢nico (G)", desc:"Grande impacto visual (sob consulta).", price:0, image:"arco-grande.jpg" },

  { id:"cubo-1", cat:"Cubo", name:"Cubo Estrutural", desc:"Estrutura para painel/mesa e apoio.", price:80, image:"cubo.jpg" },
  { id:"tap-1", cat:"Tapetes", name:"Tapete (Neutro)", desc:"Base para fotos e cen√°rio.", price:35, image:"tapete.jpg" },
  { id:"aran-1", cat:"Arandelas", name:"Arandela LED", desc:"Ilumina√ß√£o e destaque no painel.", price:30, image:"arandela.jpg" },

  { id:"urso-1", cat:"Ursos", name:"Ursinho Decorativo (P)", desc:"Ursinho para compor o cen√°rio.", price:25, image:"urso-rosa.jpg" },
  { id:"urso-2", cat:"Ursos", name:"Ursinho Decorativo (G)", desc:"Ursinho maior para destaque.", price:45, image:"urso-grande.jpg" },

  { id:"cort-1", cat:"Cortina", name:"Cortina (Dourada)", desc:"Fundo e acabamento do painel.", price:20, image:"cortina-dourada.jpg" },
  { id:"cort-2", cat:"Cortina", name:"Cortina (Prata)", desc:"Brilho e acabamento.", price:20, image:"cortina-prata.jpg" },
];

const PLACEHOLDER_SVG = (label) =>
  "data:image/svg+xml;charset=utf-8," + encodeURIComponent(`
    <svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800">
      <defs>
        <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
          <stop offset="0" stop-color="#ff4fd8" stop-opacity=".35"/>
          <stop offset="0.45" stop-color="#8b5cff" stop-opacity=".25"/>
          <stop offset="0.75" stop-color="#35d6ff" stop-opacity=".22"/>
          <stop offset="1" stop-color="#71ff7a" stop-opacity=".18"/>
        </linearGradient>
      </defs>
      <rect width="100%" height="100%" fill="#0b1230"/>
      <rect x="40" y="40" width="1120" height="720" rx="48" fill="url(#g)" />
      <g fill="rgba(255,255,255,.85)" font-family="Arial" font-weight="800">
        <text x="80" y="190" font-size="64">${label}</text>
        <text x="80" y="260" font-size="32">Faz de Conta Decora√ß√µes</text>
        <text x="80" y="320" font-size="28">Onde a imagina√ß√£o vira festa</text>
      </g>
      <g opacity=".25" fill="#fff">
        <circle cx="980" cy="230" r="90"/>
        <circle cx="1080" cy="330" r="60"/>
        <circle cx="930" cy="380" r="40"/>
      </g>
    </svg>
  `);

window.__placeholderBanner = PLACEHOLDER_SVG("Banner");
window.__placeholderLogo   = PLACEHOLDER_SVG("Logo");

/* =========================
   APP
========================= */
const money = (v) => new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(v);

let showPrices = false;
let q = "";
let cat = "";
const cart = new Map(); // id -> qty

const els = {
  grid: document.getElementById("grid"),
  q: document.getElementById("q"),
  cat: document.getElementById("cat"),
  toggle: document.getElementById("togglePrices"),
  sw: document.getElementById("sw"),
  cartCount: document.getElementById("cartCount"),
  cartCount2: document.getElementById("cartCount2"),
  cartModal: document.getElementById("cartModal"),
  cartBody: document.getElementById("cartBody"),
  cartTotal: document.getElementById("cartTotal"),
  pixModal: document.getElementById("pixModal"),
  pixKey: document.getElementById("pixKey"),
  pixSummary: document.getElementById("pixSummary"),
  pixTotal: document.getElementById("pixTotal"),
};

function initCats(){
  const cats = [...new Set(PRODUCTS.map(p => p.cat))].sort();
  cats.forEach(c=>{
    const o = document.createElement("option");
    o.value = c; o.textContent = c;
    els.cat.appendChild(o);
  });
}

function filtered(){
  return PRODUCTS.filter(p=>{
    const okQ = !q || (p.name+" "+p.desc+" "+p.cat).toLowerCase().includes(q.toLowerCase());
    const okC = !cat || p.cat === cat;
    return okQ && okC;
  });
}

function cartCount(){
  let n=0;
  cart.forEach(v=> n+=v);
  return n;
}

function cartTotal(){
  let t=0;
  cart.forEach((qty,id)=>{
    const p = PRODUCTS.find(x=>x.id===id);
    if(!p) return;
    t += (p.price||0) * qty;
  });
  return t;
}

function render(){
  const items = filtered();

  els.grid.innerHTML = "";

  const bar = document.createElement("div");
  bar.className = "catBar card";
  bar.innerHTML = `
    <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
      <div style="font-weight:950">‚ú® Itens dispon√≠veis</div>
      <span class="badge">${items.length} itens</span>
      <span class="badge">${showPrices ? "Pre√ßo: vis√≠vel" : "Pre√ßo: sob consulta"}</span>
    </div>
    <div style="display:flex;gap:10px;align-items:center">
      <span class="badge">üõí ${cartCount()} no carrinho</span>
    </div>
  `;
  els.grid.appendChild(bar);

  items.forEach(p=>{
    const div = document.createElement("div");
    div.className = "product card";

    const img = p.image || "";
    const priceTxt = (p.price && p.price > 0) ? money(p.price) : "Sob consulta";

    div.innerHTML = `
      <div class="pImg">
        <img src="${img}"
             alt="${p.name}"
             onerror="this.src='${PLACEHOLDER_SVG(p.cat)}'">
      </div>

      <div class="pMeta">
        <p class="pName">${p.name}</p>
        <p class="pDesc">${p.desc}</p>

        <div class="pBottom">
          <div class="price">${showPrices ? priceTxt : "üîí Pre√ßo" }
            <small>${showPrices ? "/ unidade" : "sob consulta"}</small>
          </div>
          <button class="btn btnGrad btnSmall" data-add="${p.id}">Ôºã Adicionar</button>
        </div>

        <div style="margin-top:10px;display:flex;gap:10px;align-items:center;flex-wrap:wrap">
          <span class="badge">${p.cat}</span>
          <span class="badge">ID: ${p.id}</span>
        </div>
      </div>
    `;
    els.grid.appendChild(div);
  });

  // binds
  document.querySelectorAll("[data-add]").forEach(b=>{
    b.onclick = ()=>{
      const id = b.getAttribute("data-add");
      cart.set(id, (cart.get(id)||0)+1);
      updateCartUI();
      openCart();
    };
  });

  updateCartUI();
}

function updateCartUI(){
  const n = cartCount();
  els.cartCount.textContent = n;
  els.cartCount2.textContent = n;
}

function openCart(){
  renderCart();
  els.cartModal.classList.add("show");
}
function closeCart(){ els.cartModal.classList.remove("show"); }

function renderCart(){
  const lines = [];
  cart.forEach((qty,id)=>{
    const p = PRODUCTS.find(x=>x.id===id);
    if(!p) return;
    const unit = (p.price && p.price>0) ? money(p.price) : "Sob consulta";
    const subtotal = (p.price && p.price>0) ? money(p.price*qty) : "‚Äî";
    lines.push({p,qty,unit,subtotal});
  });

  if(lines.length===0){
    els.cartBody.innerHTML = `<div class="copyBox">Seu carrinho est√° vazio. Adicione itens no cat√°logo.</div>`;
  } else {
    els.cartBody.innerHTML = "";
    lines.forEach(({p,qty,unit,subtotal})=>{
      const row = document.createElement("div");
      row.className = "line";
      row.innerHTML = `
        <div class="left">
          <b>${p.name}</b>
          <span>${p.cat} ‚Ä¢ ${showPrices ? ("Unidade: "+unit+" ‚Ä¢ Subtotal: "+subtotal) : "Pre√ßo sob consulta"}</span>
        </div>
        <div class="qty">
          <div class="qbtn" data-dec="${p.id}">‚àí</div>
          <div class="num">${qty}</div>
          <div class="qbtn" data-inc="${p.id}">+</div>
        </div>
      `;
      els.cartBody.appendChild(row);
    });

    document.querySelectorAll("[data-dec]").forEach(x=>{
      x.onclick = ()=>{
        const id = x.getAttribute("data-dec");
        const v = (cart.get(id)||0)-1;
        if(v<=0) cart.delete(id); else cart.set(id,v);
        updateCartUI();
        renderCart();
      };
    });
    document.querySelectorAll("[data-inc]").forEach(x=>{
      x.onclick = ()=>{
        const id = x.getAttribute("data-inc");
        cart.set(id,(cart.get(id)||0)+1);
        updateCartUI();
        renderCart();
      };
    });
  }

  els.cartTotal.textContent = money(cartTotal());
}

function openPix(){
  const total = cartTotal();
  const summary = buildOrderText();
  els.pixKey.textContent = PIX_KEY;
  els.pixSummary.textContent = summary;
  els.pixTotal.textContent = money(total);
  els.pixModal.classList.add("show");
}
function closePix(){ els.pixModal.classList.remove("show"); }

function buildOrderText(){
  if(cartCount()===0) return "Carrinho vazio.";
  const parts = [];
  cart.forEach((qty,id)=>{
    const p = PRODUCTS.find(x=>x.id===id);
    if(!p) return;
    const priceTxt = (p.price && p.price>0) ? money(p.price) : "Sob consulta";
    parts.push(`${qty}x ${p.name} (${p.cat})${showPrices ? " ‚Äî "+priceTxt : ""}`);
  });
  const totalTxt = money(cartTotal());
  return `Pedido Faz de Conta:\n- ${parts.join("\n- ")}\n\nTotal: ${totalTxt}\nPagamento: Pix`;
}

function goWhats(){
  const text = buildOrderText() + `\n\nChave Pix: ${PIX_KEY}`;
  const url = `https://wa.me/${WHATSAPP_PHONE}?text=${encodeURIComponent(text)}`;
  window.open(url, "_blank");
}

function copyText(text){
  navigator.clipboard?.writeText(text).then(()=>alert("Copiado!")).catch(()=>alert("N√£o consegui copiar. Selecione e copie manualmente."));
}

/* EVENTS */
initCats();

els.q.addEventListener("input", e=>{ q=e.target.value.trim(); render(); });
els.cat.addEventListener("change", e=>{ cat=e.target.value; render(); });

document.getElementById("btnClear").onclick = ()=>{
  q=""; cat="";
  els.q.value="";
  els.cat.value="";
  render();
};

document.getElementById("btnCart").onclick = openCart;
document.getElementById("btnCart2").onclick = openCart;
document.getElementById("closeCart").onclick = closeCart;
els.cartModal.addEventListener("click", (e)=>{ if(e.target === els.cartModal) closeCart(); });

document.getElementById("clearCart").onclick = ()=>{
  cart.clear(); updateCartUI(); renderCart(); render();
};

document.getElementById("goPix").onclick = ()=>{ closeCart(); openPix(); };

document.getElementById("btnPix").onclick = ()=>{
  if(cartCount()===0){ alert("Seu carrinho est√° vazio."); return; }
  openPix();
};
document.getElementById("btnPix2").onclick = document.getElementById("btnPix").onclick;

document.getElementById("closePix").onclick = closePix;
els.pixModal.addEventListener("click", (e)=>{ if(e.target === els.pixModal) closePix(); });

document.getElementById("btnWpp").onclick = ()=>{
  const url = `https://wa.me/${WHATSAPP_PHONE}?text=${encodeURIComponent("Ol√°! Vim pelo app Faz de Conta. Quero um or√ßamento üòä")}`;
  window.open(url, "_blank");
};
document.getElementById("btnWpp2").onclick = document.getElementById("btnWpp").onclick;

document.getElementById("pixWhats").onclick = goWhats;

document.getElementById("copyPix").onclick = ()=> copyText(PIX_KEY);
document.getElementById("copyMsg").onclick = ()=> copyText(buildOrderText());

els.toggle.onclick = ()=>{
  showPrices = !showPrices;
  els.sw.classList.toggle("on", showPrices);
  render();
};

/* Primeira renderiza√ß√£o */
render();
</script>
</body>
</html>
